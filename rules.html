<!-- FILE: rules.html  (ALLES ersetzen) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kill Event Rules</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="page">
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <h1 id="page-title">Kill Event (KE) Rules</h1>
        <p id="intro-text"><strong>ALL STARS UNITED</strong></p>
      </div>

      <div class="lang">
        <select id="language-select" aria-label="Language">
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="pl">ğŸ‡µğŸ‡± Polski</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="th">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
          <option value="id">ğŸ‡®ğŸ‡© Indonesia</option>
          <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
          <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
          <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
          <option value="uk">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
        </select>
      </div>
    </div>

    <nav class="nav">
      <div class="container nav-inner">
        <a id="nav-home" href="index.html">ğŸ  Home</a>
        <a id="nav-history" href="history.html">ğŸ“– History</a>
        <a id="nav-alliances" href="alliances.html">ğŸ›¡ï¸ Alliances</a>
        <a id="nav-rules" href="rules.html" class="active">ğŸ“œ Rules</a>
        <a id="nav-fort" href="fort.html">ğŸ° Fort</a>
        <a id="nav-news" href="news.html">ğŸ”¥ News</a>
        <a id="nav-apply" href="apply.html">ğŸ“ Apply</a>
        <a id="nav-community" href="community.html">ğŸ’¬ Community</a>
      </div>
    </nav>
  </header>

  <main class="content">
    <div class="container">

      <section class="card">
        <div class="section-head">
          <h3 id="ke-title">ğŸ“¢ Please respect all guidelines during the event</h3>
          <p class="muted" id="ke-sub">State 214 ruleset</p>
        </div>

        <div class="rules-grid">

          <article class="rule-card">
            <div class="rule-head">
              <div class="badge" id="badge-event">EVENT</div>
              <h2 class="rule-title" id="event-title">1ï¸âƒ£ Kill Event â€“ Brothers in Arms (BIA)</h2>
            </div>

            <div class="rule-block">
              <h4 id="rule-1">1ï¸âƒ£ Attacking Resource Points</h4>
              <p id="rule-1-text" class="state-bad">Not allowed. Attacking resource gathering points is strictly prohibited.</p>
            </div>

            <div class="rule-block">
              <h4 id="rule-2">2ï¸âƒ£ Attacking NAP 3, SUB Members, or Players Inside NAP 3/SUB Base or HQ</h4>
              <p id="rule-2-text" class="state-bad">Not allowed. Do not attack players under NAP 3, SUB alliances, or those located in NAP 3/SUB base or HQ.</p>
            </div>

            <div class="rule-block">
              <h4 id="rule-3">3ï¸âƒ£ Attacking Players Outside of NAP or Without an Alliance</h4>
              <p id="rule-3-text" class="state-good">Allowed. You may attack these players without any restrictions.</p>
            </div>
          </article>

          <article class="rule-card">
            <div class="rule-head">
              <div class="badge" id="badge-castle">CASTLE</div>
              <h2 class="rule-title" id="castle-title">2ï¸âƒ£ Castle Rotation</h2>
            </div>
            <p id="castle-text" class="state-good">
              The Top 3 alliances rotate control of the castle every 2 weeks. This ensures that every alliance within the Top 3 has an opportunity to control the castle.
            </p>

            <div class="pill-row">
              <span class="pill top">TOP 3</span>
              <span class="pill">2 WEEKS</span>
              <span class="pill">ROTATION</span>
            </div>
          </article>

          <article class="rule-card">
            <div class="rule-head">
              <div class="badge" id="badge-state">STATE</div>
              <h2 class="rule-title" id="facility-title">3ï¸âƒ£ Facility Assignment</h2>
            </div>
            <p id="facility-text" class="state-good">
              Facilities within the state will be shared and assigned on a fixed basis. Each alliance will be assigned its designated facilities to ensure efficient operations during the event.
            </p>
          </article>

        </div>
      </section>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-wrap">
      <div class="footer-top">
        <div class="footer-brand">STATE 214 â€¢ ALL STARS UNITED</div>
        <div class="footer-meta" id="footer-text">Â© 2026 State 214 Community â€” Built by players, for players.</div>
      </div>

      <div class="footer-bottom">
        <div class="footer-line">
          Â© WOSC â€” Whiteout Survival Community â€¢
          <a class="footer-link" href="https://discord.gg/wos-community" target="_blank" rel="noopener">discord.gg/wos-community</a>
        </div>
        <div class="footer-line">
          Design &amp; Build: <span class="footer-strong">Bros24</span>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // FIX: MenÃ¼ Ã¼bersetzen egal ob dein JSON nav-* nutzt oder alte keys
    const FALLBACK_LANG = 'en';
    const LANG_KEY = 'state214_lang';

    function getSafe(dict, lang, key){
      if(dict && dict[lang] && dict[lang][key] != null) return dict[lang][key];
      if(dict && dict[FALLBACK_LANG] && dict[FALLBACK_LANG][key] != null) return dict[FALLBACK_LANG][key];
      return null;
    }

    function forceNap3(str){
      return String(str)
        .replace(/\bNAP\s*5\b/ig, 'NAP 3')
        .replace(/\bBIG\s*5\b/ig, 'Top 3')
        .replace(/\bTop\s*5\b/ig, 'Top 3')
        .replace(/\bTop-5\b/ig, 'Top 3')
        .replace(/\bBig-5\b/ig, 'Top 3');
    }

    function translateNav(dict, lang){
      const t = dict[lang] || dict[FALLBACK_LANG] || {};

      // preferred: nav-* keys (wie index.json)
      const nHome = t["nav-home"] || (t["home"] ? "ğŸ  " + t["home"] : null);
      const nHistory = t["nav-history"] || (t["history"] ? "ğŸ“– " + t["history"] : null);
      const nAlliances = t["nav-alliances"] || (t["alliances"] ? "ğŸ›¡ï¸ " + t["alliances"] : null);
      const nRules = t["nav-rules"] || (t["rules"] ? "ğŸ“œ " + t["rules"] : null);
      const nFort = t["nav-fort"] || (t["fort"] ? "ğŸ° " + t["fort"] : null);
      const nNews = t["nav-news"] || (t["news"] ? "ğŸ”¥ " + t["news"] : null);
      const nApply = t["nav-apply"] || t["apply-nav"] || (t["apply"] ? "ğŸ“ " + t["apply"] : null);
      const nCommunity = t["nav-community"] || (t["community"] ? "ğŸ’¬ " + t["community"] : null);

      if(nHome) $('#nav-home').text(nHome);
      if(nHistory) $('#nav-history').text(nHistory);
      if(nAlliances) $('#nav-alliances').text(nAlliances);
      if(nRules) $('#nav-rules').text(nRules);
      if(nFort) $('#nav-fort').text(nFort);
      if(nNews) $('#nav-news').text(nNews);
      if(nApply) $('#nav-apply').text(nApply);
      if(nCommunity) $('#nav-community').text(nCommunity);
    }

    $(document).ready(function(){
      $.getJSON('rules.json', function(data){

        function translatePage(lang){
          const pageTitle = getSafe(data, lang, "page-title");
          const intro = getSafe(data, lang, "intro-text") || getSafe(data, lang, "home");

          const keTitle = getSafe(data, lang, "ke-title");
          const keSub = getSafe(data, lang, "ke-sub");

          const eventTitle = getSafe(data, lang, "event-title");
          const r1 = getSafe(data, lang, "rule-1");
          const r1t = getSafe(data, lang, "rule-1-text");
          const r2 = getSafe(data, lang, "rule-2");
          const r2t = getSafe(data, lang, "rule-2-text");
          const r3 = getSafe(data, lang, "rule-3");
          const r3t = getSafe(data, lang, "rule-3-text");

          const castleTitle = getSafe(data, lang, "castle-title");
          const castleText = getSafe(data, lang, "castle-text");

          const facilityTitle = getSafe(data, lang, "facility-title");
          const facilityText = getSafe(data, lang, "facility-text");

          const footer = getSafe(data, lang, "footer-text");

          if(pageTitle) $('#page-title').text(pageTitle);
          if(intro) $('#intro-text').text(intro);

          if(keTitle) $('#ke-title').text(keTitle);
          if(keSub) $('#ke-sub').text(keSub);

          if(eventTitle) $('#event-title').text(forceNap3(eventTitle));

          if(r1) $('#rule-1').text(forceNap3(r1));
          if(r1t) $('#rule-1-text').text(forceNap3(r1t));

          if(r2) $('#rule-2').text(forceNap3(r2));
          if(r2t) $('#rule-2-text').text(forceNap3(r2t));

          if(r3) $('#rule-3').text(forceNap3(r3));
          if(r3t) $('#rule-3-text').text(forceNap3(r3t));

          if(castleTitle) $('#castle-title').text(forceNap3(castleTitle));
          if(castleText) $('#castle-text').text(forceNap3(castleText));

          if(facilityTitle) $('#facility-title').text(forceNap3(facilityTitle));
          if(facilityText) $('#facility-text').text(forceNap3(facilityText));

          if(footer) $('#footer-text').text(footer);

          // NAV immer setzen
          translateNav(data, lang);
        }

        // init: saved language
        const saved = localStorage.getItem(LANG_KEY) || 'en';
        $('#language-select').val(saved);
        translatePage(saved);

        $('#language-select').on('change', function(){
          const lang = $(this).val();
          localStorage.setItem(LANG_KEY, lang);
          translatePage(lang);
        });
      })
      .fail(function(){
        console.warn('rules.json could not be loaded.');
      });
    });
  </script>
</body>
</html>
