<!-- FILE: fort.html  (ALLES ersetzen) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fortress Strategy â€“ State 214</title>

  <!-- FAVICON / SITE ICON -->
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-192x192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon-192x192.png">

  <link rel="stylesheet" href="style.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="page">
  <header class="site-header">
    <div class="container header-inner">

      <!-- BRAND + HOME ICON (CLICKABLE) -->
      <div class="brand">
        <a class="brand-home" href="index.html" aria-label="Go to Home">
          <img src="/assets/favicon-192x192.png" alt="State 214" class="brand-logo">
          <div class="brand-text">
            <h1 id="page-title">Fortress Strategy</h1>
            <p id="intro-text"><strong>ALL STARS UNITED</strong></p>
          </div>
        </a>
      </div>

      <div class="lang">
        <select id="language-select" aria-label="Language">
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="pl">ğŸ‡µğŸ‡± Polski</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="th">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
          <option value="id">ğŸ‡®ğŸ‡© Indonesia</option>
          <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
          <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
          <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
          <option value="uk">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
        </select>
      </div>
    </div>

    <nav class="nav">
      <div class="container nav-inner">
        <a id="nav-home" href="index.html">ğŸ  Home</a>
        <a id="nav-history" href="history.html">ğŸ“– History</a>
        <a id="nav-alliances" href="alliances.html">ğŸ›¡ï¸ Alliances</a>
        <a id="nav-rules" href="rules.html">ğŸ“œ Rules</a>
        <a id="nav-fort" href="fort.html" class="active">ğŸ° Fort</a>
        <a id="nav-news" href="news.html">ğŸ”¥ News</a>
        <a id="nav-apply" href="apply.html">ğŸ“ Apply</a>
        <a id="nav-community" href="community.html">ğŸ’¬ Community</a>
      </div>
    </nav>
  </header>

  <main class="content">
    <div class="container">

      <section class="hero">
        <img src="assets/fortrules.jpg" alt="Fortress Rules" class="hero-img" />
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <div class="hero-kicker">STATE 214</div>
          <h2 id="fort-title">âš”ï¸ Fortress Strategy & Distribution</h2>
          <p id="fort-description">
            At State 214, we believe that a fair and transparent fortress distribution is essential to maintaining a healthy and united state.
            Our strategy is built around teamwork, smart planning, and preparation for major events like <strong>State vs State (SvS)</strong>
            and the <strong>Frost Dragon Tyrant Event</strong>.
          </p>
        </div>
      </section>

      <section class="card">
        <h3 id="fort-details-title">Distribution</h3>
        <p id="fort-details">
          The weekly fortress battles are not just for glory â€“ they are a key part of our stateâ€™s long-term strategy. Here's how we structure the distribution:
        </p>

        <!-- TOP 3 ONLY -->
        <div class="fort-grid">
          <article class="fort-card top">
            <div class="badge top" id="badge-rank1">RANK 1</div>
            <div class="fort-line" id="rank-1">Rank 1: 1x Stronghold & 4x Fort</div>
          </article>

          <article class="fort-card">
            <div class="badge" id="badge-rank2">RANK 2</div>
            <div class="fort-line" id="rank-2">Rank 2: 1x Stronghold & 3x Fort</div>
          </article>

          <article class="fort-card">
            <div class="badge" id="badge-rank3">RANK 3</div>
            <div class="fort-line" id="rank-3">Rank 3: 1x Stronghold & 2x Fort</div>
          </article>
        </div>

        <div class="rule-block" style="margin-top:16px;">
          <h4 id="important-note-title">Important</h4>
          <p id="important-note" class="state-good">
            Rewards obtained from Forts and Strongholds should be used responsibly and saved for SvS battles.
            Every alliance is expected to contribute to our shared success in 214.
          </p>
        </div>
      </section>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-wrap">
      <div class="footer-top">
        <div class="footer-brand">STATE 214 â€¢ ALL STARS UNITED</div>
        <div class="footer-meta" id="footer-text">Â© 2026 State 214 Community â€” Built by players, for players.</div>
      </div>

      <div class="footer-bottom">
        <div class="footer-line">
          Â© WOSC â€” Whiteout Survival Community â€¢
          <a class="footer-link" href="https://discord.gg/wos-community" target="_blank" rel="noopener">discord.gg/wos-community</a>
        </div>
        <div class="footer-line">
          Design &amp; Build: <span class="footer-strong">Bros24</span>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const FALLBACK_LANG = 'en';
    const LANG_KEY = 'state214_lang';

    function getSafe(dict, lang, key){
      if(dict && dict[lang] && dict[lang][key] != null) return dict[lang][key];
      if(dict && dict[FALLBACK_LANG] && dict[FALLBACK_LANG][key] != null) return dict[FALLBACK_LANG][key];
      return null;
    }

    // enforce TOP 3 only (remove/ignore any old Top5 wording if it exists in text)
    function forceTop3(str){
      return String(str)
        .replace(/\bTop\s*5\b/ig, 'Top 3')
        .replace(/\bTOP\s*5\b/ig, 'TOP 3')
        .replace(/\bBig\s*5\b/ig, 'Top 3')
        .replace(/\bBIG\s*5\b/ig, 'TOP 3');
    }

    // Entfernt fÃ¼hrende Emojis/Icons, damit keine doppelten Emojis entstehen
    function stripLeadingIcons(text){
      if(!text) return "";
      return String(text).replace(
        /^[\s\u200D\uFE0F]*(?:[\p{Extended_Pictographic}\p{Emoji_Presentation}\p{Emoji}\u2600-\u27BF]\s*)+/gu,
        ""
      ).trim();
    }

    // Baut immer GENAU 1 Emoji + Label
    function navLabel(t, navKey, plainKey, emoji, fallback){
      const raw = t[navKey] ?? t[plainKey] ?? fallback;
      const clean = stripLeadingIcons(raw);
      return `${emoji} ${clean || stripLeadingIcons(fallback)}`;
    }

    function translateNav(dict, lang){
      const t = dict[lang] || dict[FALLBACK_LANG] || {};
      $('#nav-home').text(navLabel(t, "nav-home", "home", "ğŸ ", "Home"));
      $('#nav-history').text(navLabel(t, "nav-history", "history", "ğŸ“–", "History"));
      $('#nav-alliances').text(navLabel(t, "nav-alliances", "alliances", "ğŸ›¡ï¸", "Alliances"));
      $('#nav-rules').text(navLabel(t, "nav-rules", "rules", "ğŸ“œ", "Rules"));
      $('#nav-fort').text(navLabel(t, "nav-fort", "fort", "ğŸ°", "Fort"));
      $('#nav-news').text(navLabel(t, "nav-news", "news", "ğŸ”¥", "News"));
      // manche JSON nutzen apply-nav statt apply
      $('#nav-apply').text(navLabel(t, "nav-apply", "apply-nav", "ğŸ“", "Apply"));
      $('#nav-community').text(navLabel(t, "nav-community", "community", "ğŸ’¬", "Community"));
    }

    $(document).ready(function(){
      $.getJSON('fort.json', function(data){

        function translatePage(lang){
          const pageTitle = getSafe(data, lang, "page-title");
          const intro = getSafe(data, lang, "intro-text") || "ALL STARS UNITED";

          const fortTitle = getSafe(data, lang, "fort-title");
          const fortDesc = getSafe(data, lang, "fort-description");
          const fortDetailsTitle = getSafe(data, lang, "fort-details-title") || getSafe(data, lang, "rank-title");
          const fortDetails = getSafe(data, lang, "fort-details");

          const rank1 = getSafe(data, lang, "rank-1");
          const rank2 = getSafe(data, lang, "rank-2");
          const rank3 = getSafe(data, lang, "rank-3");

          const importantTitle = getSafe(data, lang, "important-note-title") || "Important";
          const important = getSafe(data, lang, "important-note");
          const footer = getSafe(data, lang, "footer-text");

          if(pageTitle) $('#page-title').text(forceTop3(pageTitle));
          if(intro) $('#intro-text').text(forceTop3(intro));

          if(fortTitle) $('#fort-title').text(forceTop3(fortTitle));
          if(fortDesc) $('#fort-description').text(forceTop3(fortDesc));
          if(fortDetailsTitle) $('#fort-details-title').text(forceTop3(fortDetailsTitle));
          if(fortDetails) $('#fort-details').text(forceTop3(fortDetails));

          if(rank1) $('#rank-1').text(forceTop3(rank1));
          if(rank2) $('#rank-2').text(forceTop3(rank2));
          if(rank3) $('#rank-3').text(forceTop3(rank3));

          if(importantTitle) $('#important-note-title').text(forceTop3(importantTitle));
          if(important) $('#important-note').text(forceTop3(important));

          if(footer) $('#footer-text').text(forceTop3(footer));

          translateNav(data, lang);
        }

        const saved = localStorage.getItem(LANG_KEY) || 'en';
        $('#language-select').val(saved);
        translatePage(saved);

        $('#language-select').on('change', function(){
          const lang = $(this).val();
          localStorage.setItem(LANG_KEY, lang);
          translatePage(lang);
        });
      })
      .fail(function(){
        console.error("Error loading fort.json");
      });
    });
  </script>

  <!--
    EINMALIG in style.css hinzufÃ¼gen (fÃ¼r alle Seiten, damit Logo oben links sauber sitzt):

    .brand-home { display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit; }
    .brand-logo { width:42px; height:42px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
    .brand-text h1 { margin:0; }
    .brand-text p { margin:0; }
  -->
</body>
</html>
